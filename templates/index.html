<!-- templates/index.html -->
{% extends "base.html" %}

{% block content %}
<div class="container py-5">

    <div class="mb-5">
        <h1 class="fw-bold">Cycling Stats</h1>
        <p class="text-muted">Welcome, {{ current_user_name }}.</p>
    </div>

    {% if syncing %}
    <div class="text-center py-5">
        <div class="spinner-border text-primary mb-3" role="status"></div>
        <h3 class="fw-bold">Syncing your data...</h3>
        <p class="text-muted">Pulling your activities from Strava. Hang tight.</p>
    </div>
    <script>
        setTimeout(function() { window.location.reload(); }, 5000);
    </script>
    
    {% else %}
    <div class="row g-4">
        <div class="col-md-6">
            <div class="card h-100 p-4 bg-white border rounded-3 shadow-sm position-relative card-hover">
                <div class="card-body p-0">
                    <h3 class="fw-bold">
                        <a href="/fitness" class="text-decoration-none text-dark stretched-link">Form & Fitness</a>
                    </h3>
                    <p class="text-muted small mb-0">Daily trends of Chronic and Accute traning load.</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card h-100 p-4 bg-white border rounded-3 shadow-sm position-relative card-hover">
                <div class="card-body p-0">
                    <h3 class="fw-bold">
                        <a href="/performance" class="text-decoration-none text-dark stretched-link">Performance</a>
                    </h3>
                    <p class="text-muted small mb-0">Power profiles, FTP trends and trend analysis.</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card h-100 p-4 bg-white border rounded-3 shadow-sm position-relative card-hover">
                <div class="card-body p-0">
                    <h3 class="fw-bold">
                        <a href="/dashboard" class="text-decoration-none text-dark stretched-link">Dashboard</a>
                    </h3>
                    <p class="text-muted small mb-0">Overview of training metrics and monthly progress.</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card h-100 p-4 bg-white border rounded-3 shadow-sm position-relative card-hover">
                <div class="card-body p-0">
                    <h3 class="fw-bold">
                        <a href="/map" class="text-decoration-none text-dark stretched-link">Maps</a>
                    </h3>
                    <p class="text-muted small mb-0">Heatmaps of rides with filters.</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card h-100 p-4 bg-white border rounded-3 shadow-sm position-relative card-hover">
                <div class="card-body p-0">
                    <h3 class="fw-bold">
                        <a href="/activities" class="text-decoration-none text-dark stretched-link">Activity History</a>
                    </h3>
                    <p class="text-muted small mb-0">Filter historical activities.</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card h-100 p-4 bg-white border rounded-3 shadow-sm position-relative card-hover">
                <div class="card-body p-0">
                    {% if last_activity_id %}
                        <h3 class="fw-bold">
                            <a href="/activity/{{ last_activity_id }}" class="text-decoration-none text-dark stretched-link">Latest Ride</a>
                        </h3>
                        <p class="text-muted small mb-0">Detailed look & analysis on activity level.</p>
                    {% else %}
                        <h3 class="fw-bold text-muted">Latest Activity</h3>
                        <p class="text-muted small mb-0">No activities found.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}

</div>

<style>
    .card-hover {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .card-hover:hover {
        transform: translateY(-3px);
        box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;
        background-color: #fcfcfc!important;
    }
</style>
{% endblock %}